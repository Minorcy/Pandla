{"version":3,"sources":["webpack:///C:/Users/WIN10/Desktop/项目/xingjueApp/components/wm-poster/wm-poster.vue?9b34","webpack:///C:/Users/WIN10/Desktop/项目/xingjueApp/components/wm-poster/wm-poster.vue?c66e","webpack:///C:/Users/WIN10/Desktop/项目/xingjueApp/components/wm-poster/wm-poster.vue?28f9","webpack:///C:/Users/WIN10/Desktop/项目/xingjueApp/components/wm-poster/wm-poster.vue?35b5","webpack:///C:/Users/WIN10/Desktop/项目/xingjueApp/components/wm-poster/wm-poster.vue"],"names":["_this","name","props","CanvasID","Type","String","default","imgSrc","QrSrc","Title","TitleColor","LineType","Boolean","PriceTxt","PriceColor","OriginalTxt","OriginalColor","Width","Height","CanvasBg","Referrer","ViewDetails","data","canvasW","canvasH","canvasImgSrc","ctx","methods","OnCanvas","uni","showLoading","title","createCanvasContext","C_W","upx2px","C_P","C_Q","_strlineW","getImageInfo","_imgInfo","_QrCode","height","r","width","q","imgW","Math","floor","setFillStyle","fillRect","drawImage","path","setTimeout","draw","ret","getNewImage","Promise","resolve","errs","src","success","image","fail","err","canvasToTempFilePath","canvasId","quality","complete","res","hideLoading","$emit","mounted"],"mappings":"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","file":"components/wm-poster/wm-poster.js","sourcesContent":["import { render, staticRenderFns } from \"./wm-poster.vue?vue&type=template&id=350831a8&\"\nimport script from \"./wm-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./wm-poster.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('350831a8', component.options)\n    } else {\n      api.reload('350831a8', component.options)\n    }\n    module.hot.accept(\"./wm-poster.vue?vue&type=template&id=350831a8&\", function () {\n      api.rerender('350831a8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/WIN10/Desktop/项目/xingjueApp/components/wm-poster/wm-poster.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=template&id=350831a8&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\n\tvar _this;\nexport default {\n\tname: 'wm-poster',\n\tprops: {\n\t\tCanvasID:{\t\t//CanvasID 等同于 canvas-id\n\t\t\tType:String,\n\t\t\tdefault:'PosterCanvas'\n\t\t},\n\t\timgSrc:{\t\t//展示图\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tQrSrc:{\t\t\t//二维码\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tTitle:{\t\t\t//文本内容\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tTitleColor:{\t//标题颜色\n\t\t\tType:String,\n\t\t\tdefault:'#333333'\n\t\t},\n\t\tLineType:{\t\t//标题显示行数\t\t（注超出2行显示会导致画布布局絮乱）\n\t\t\tType:[String,Boolean],\n\t\t\tdefault:true\n\t\t},\n\t\tPriceTxt:{\t\t//价格值\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tPriceColor:{\t//价格颜色\n\t\t\tType:String,\n\t\t\tdefault:'#000000'\n\t\t},\n\t\tOriginalTxt:{\t//原价值\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tOriginalColor:{\t//默认颜色（如原价与扫描二维码颜色）\n\t\t\tType:String,\n\t\t\tdefault:'#b8b8b8'\n\t\t},\n\t\tWidth:{\t\t\t//画布宽度  (高度根据图片比例计算 单位upx)\n\t\t\tType:String,\n\t\t\tdefault:750\n\t\t},\n\t\tHeight:{\n\t\t\tType:String,\n\t\t\tdefault:750\n\t\t},\n\t\tCanvasBg:{\t\t//canvas画布背景色\n\t\t\tType:String,\t\t\n\t\t\tdefault:'#ffffff'\n\t\t},\n\t\tReferrer:{\t\t//推荐人信息\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tViewDetails:{\t//描述提示文字\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanvasW:0,\n\t\t\tcanvasH: 0,\n\t\t\tcanvasImgSrc:'',\n\t\t\tctx:null,\n\t\t};\n\t},\n\tmethods: {\n\t\tasync OnCanvas() {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '生成海報中'\n\t\t\t});\n\t\t\t_this.ctx = uni.createCanvasContext(_this.CanvasID,this);\n\t\t\tconst C_W = uni.upx2px(_this.Width), //canvas宽度\n\t\t\t\tC_P = uni.upx2px(0), //canvas Paddng 间距\n\t\t\t\tC_Q = uni.upx2px(200); //二维码或太阳码宽高\n\t\t\tlet _strlineW = 0; //文本宽度\n\t\t\tlet _imgInfo = await _this.getImageInfo({ imgSrc: _this.imgSrc }); //广告图\n\t\t\tlet _QrCode = await _this.getImageInfo({ imgSrc: _this.QrSrc }); //二维码或太阳码\n\t\t\tthis.canvasH = _imgInfo.height\n\t\t\tlet r = [_imgInfo.width, _imgInfo.height];\n\t\t\tlet q = [_QrCode.width, _QrCode.height];\n\t\t\tlet imgW = C_W;\n\t\t\tif (r[0] != imgW) {\n\t\t\t\tr[1] = Math.floor((imgW / r[0]) * r[1]);\n\t\t\t\tr[0] = imgW;\n\t\t\t}\n\t\t\tif (q[0] != C_Q) {\n\t\t\t\tq[1] = Math.floor((C_Q / q[0]) * q[1]);\n\t\t\t\tq[0] = C_Q;\n\t\t\t}\n\t\t\t_this.canvasW = C_W;\n\t\t\t_this.canvasH = r[1];\n\t\t\t_this.ctx.setFillStyle(_this.CanvasBg); //canvas背景颜色\n\t\t\t_this.ctx.fillRect(0, 0, C_W, _this.canvasH); //canvas画布大小\n\t\t\t\n\t\t\t\n\t\t\t//添加图片展示\n\t\t\t_this.ctx.drawImage(_imgInfo.path, C_P, C_P, r[0], r[1]);\n\t\t\t//添加图片展示 end\n\n\t\t\t//设置文本\n\t\t\t// _this.ctx.setFontSize(uni.upx2px(30)); //设置标题字体大小\n\t\t\t// _this.ctx.setFillStyle(_this.TitleColor); //设置标题文本颜色\n\t\t\t// let _strLastIndex = 0; //每次开始截取的字符串的索引\n\t\t\t// let _strHeight = r[1] + C_P * 2 + 10; //绘制字体距离canvas顶部的初始高度\n\t\t\t// let _num=1;\n\t\t\t// for (let i = 0; i < _this.Title.length; i++) {\n\t\t\t// \t_strlineW += _this.ctx.measureText(_this.Title[i]).width;\n\t\t\t// \tif (_strlineW > r[0]) {\n\t\t\t// \t\tif(_num == 2&&_this.LineType){\n\t\t\t// \t\t\t//文字换行数量大于二进行省略号处理\n\t\t\t// \t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i-8)+'...', C_P, _strHeight);\n\t\t\t// \t\t\t_strlineW = 0;\n\t\t\t// \t\t\t_strLastIndex = i;\n\t\t\t// \t\t\t_num++;\n\t\t\t// \t\t\tbreak;\n\t\t\t// \t\t}else{\n\t\t\t// \t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i), C_P, _strHeight);\n\t\t\t// \t\t\t_strlineW = 0;\n\t\t\t// \t\t\t_strHeight += 20;\n\t\t\t// \t\t\t_strLastIndex = i;\n\t\t\t// \t\t\t_num++;\n\t\t\t// \t\t}\n\t\t\t// \t}else if (i == _this.Title.length - 1) {\n\t\t\t// \t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i + 1), C_P, _strHeight + uni.upx2px(70));\n\t\t\t// \t\t_strlineW = 0;\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t//设置文本 end\n\n\t\t\t//设置价格\n\t\t\t// _strlineW = C_P;\n\t\t\t// _strHeight += uni.upx2px(20);\n\t\t\t// // if(_num==1){\n\t\t\t// // \t_strHeight += 20;\t//单行标题时占位符\n\t\t\t// // }\n\t\t\t// \n\t\t\t// if(_this.PriceTxt !=''){\t//判断是否有销售价格\n\t\t\t// \t_this.ctx.setFillStyle(_this.PriceColor);\n\t\t\t// \t_this.ctx.setFontSize(uni.upx2px(38));\n\t\t\t// \t_this.ctx.fillText(_this.PriceTxt, _strlineW, _strHeight); //商品价格\n\t\t\t// \t_strlineW += _this.ctx.measureText(_this.PriceTxt).width + uni.upx2px(10);\n\t\t\t// }\n\t\t\t// if(_this.PriceTxt !='' && _this.OriginalTxt !=''){\t//判断是否有销售价格且原价\n\t\t\t// \t_this.ctx.setFillStyle(_this.OriginalColor);\n\t\t\t// \t_this.ctx.setFontSize(uni.upx2px(24));\n\t\t\t// \t_this.ctx.fillText(_this.OriginalTxt, _strlineW, _strHeight); //商品原价\n\t\t\t// }\n\t\t\t// _this.ctx.strokeStyle = _this.OriginalColor;\n\t\t\t// _this.ctx.moveTo(_strlineW, _strHeight - uni.upx2px(10)); //起点\n\t\t\t// _this.ctx.lineTo(_strlineW + _this.ctx.measureText(_this.OriginalTxt).width, _strHeight - uni.upx2px(10)); //终点\n\t\t\t// _this.ctx.stroke();\n\t\t\t//设置价格 end\n\n\t\t\t//添加二维码\n\t\t\t// _strHeight -= uni.upx2px(30);\n\t\t\t_this.ctx.drawImage(_QrCode.path, (this.canvasW/2)-50, (_imgInfo.height/3)+50, q[0], q[1]);\n\t\t\t//添加二维码 end\n\n\t\t\t//添加推荐人与描述\n\t\t\t// _this.ctx.setFillStyle(_this.TitleColor);\n\t\t\t// _this.ctx.setFillStyle(_this.OriginalColor);\n\t\t\t// _this.ctx.setFontSize(uni.upx2px(24));\n\t\t\t// _this.ctx.fillText(_this.Referrer, C_P, _strHeight + uni.upx2px(50) + q[1] / 2);\n\t\t\t// _this.ctx.setFillStyle(_this.OriginalColor);\n\t\t\t// _this.ctx.setFontSize(uni.upx2px(24));\n\t\t\t// _this.ctx.fillText(_this.ViewDetails, C_P, _strHeight + uni.upx2px(50) + q[1] / 2 + 20);\n\t\t\t//添加推荐人与描述 end\n\t\t\t\n\t\t\t//延迟后渲染至canvas上\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.ctx.draw(true,(ret)=>{\n\t\t\t\t\t_this.getNewImage();\n\t\t\t\t});\n\t\t\t}, 300);\n\t\t\t\n\t\t},\n\t\tasync getImageInfo({ imgSrc }) {\n\t\t\t// console.log(imgSrc)\n\t\t\treturn new Promise((resolve, errs) => {\n\t\t\t\tuni.getImageInfo({\n\t\t\t\t\tsrc: imgSrc,\n\t\t\t\t\tsuccess: function(image) {\n\t\t\t\t\t\tresolve(image);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\terrs(\"err===>\",err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetNewImage(){\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tcanvasId: _this.CanvasID,\n\t\t\t\tquality: 1,\n\t\t\t\tcomplete: (res) => {\n\t\t\t\t\t// console.log(res.tempFilePath);\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t_this.$emit('success',res);\n\t\t\t\t}\n\t\t\t},this);\n\t\t}\n\t\t\n\t},\n\tmounted() {\n\t\t_this = this;\n\t\t_this.OnCanvas();\n\t}\n};\n"],"sourceRoot":""}