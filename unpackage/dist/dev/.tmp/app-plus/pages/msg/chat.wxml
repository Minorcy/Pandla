<view class="chat-page"><view class="message-wrapper chat-list" scroll-with-animation="{{true}}"><block wx:for="{{$root.l0}}" wx:for-item="msg" wx:for-index="index" wx:key="index"><view class="message-item chat-list" id="chat-list"><block wx:if="{{msg.$orig.type==='timeTag'}}"><view class="message-time"><text>{{msg.$orig.text}}</text></view></block><block wx:if="{{msg.$orig.type!='timeTag'}}"><view><block wx:if="{{msg.$orig.flow==='in'}}"><view class="message-body  your-msg"><view class="rong-avatar"><block wx:if="{{msg.$orig.type!='timeTag'}}"><image class="rong-avatar-bd _img" src="{{userInfos[to].avatar}}" mode="aspectFill" data-event-opts="{{[['tap',[['toUser']]]]}}" bindtap="__e"></image></block></view><block wx:if="{{msg.$orig.type!='image'}}"><text class="left-triangle"></text></block><view class="{{['message-text-your',msg.$orig.type=='image'?'nobg':'']}}"><rich-text class="{{[msg.$orig.type==='timeTag'?'user-time':'user-msg']}}" nodes="{{msg.f0}}"></rich-text><block wx:if="{{msg.$orig.type=='image'}}"><view data-event-opts="{{[['tap',[['previewImage',['$0'],[[['msglist','',index,'file.url']]]]]]]}}" class="message-img your-img" bindtap="__e"><block wx:if="{{msg.$orig.type=='image'}}"><image src="{{msg.$orig.file.url}}" mode="aspectFill"></image></block></view></block></view></view></block><block wx:if="{{msg.$orig.flow==='out'}}"><view class="message-body my-msg"><view class="{{['message-text',msg.$orig.type=='image'?'nobg':'']}}"><rich-text class="{{[msg.$orig.type==='timeTag'?'user-time':'user-msg']}}" nodes="{{msg.f1}}"></rich-text><block wx:if="{{msg.$orig.type=='image'}}"><view data-event-opts="{{[['tap',[['previewImage',['$0'],[[['msglist','',index,'file.url']]]]]]]}}" class="message-img" bindtap="__e"><block wx:if="{{msg.$orig.type=='image'}}"><image src="{{msg.$orig.file.url}}" mode="aspectFill"></image></block></view></block></view><block wx:if="{{msg.$orig.type!='image'}}"><text class="right-triangle"></text></block><view class="rong-avatar"><block wx:if="{{msg.$orig.type!='timeTag'}}"><image class="rong-avatar-bd _img" src="{{myInfo.avatar}}" mode="aspectFill"></image></block></view></view></block></view></block></view></block></view><view class="foot"><chat-input vue-id="1" to="{{to}}" data-event-opts="{{[['^sendMessage',[['getInputMessage']]],['^show',[['setScrollH']]],['^foc',[['setScrollH']]],['^sendImg',[['sendImg']]]]}}" bind:sendMessage="__e" bind:show="__e" bind:foc="__e" bind:sendImg="__e" bind:__l="__l"></chat-input></view></view>