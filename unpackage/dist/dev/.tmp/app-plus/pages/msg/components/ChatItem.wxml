<view class="{{['u-msg _li data-v-4e6cde2f',(msg.flow==='out')?'item-me':'',(msg.flow==='in')?'item-you':'',(msg.type==='timeTag')?'item-time':'',(msg.type==='tip')?'item-tip':'',(type==='session')?'session-chat':'']}}"><block wx:if="{{msg.type==='timeTag'}}"><view class="_div data-v-4e6cde2f">{{"---- "+msg.showText+" ----"}}</view></block><block wx:else><block wx:if="{{msg.type==='tip'}}"><view class="tip _div data-v-4e6cde2f">{{msg.showText}}</view></block><block wx:else><block wx:if="{{msg.type==='notification'&&msg.scene==='team'}}"><view class="notification _div data-v-4e6cde2f">{{msg.showText}}</view></block><block wx:else><block wx:if="{{msg.flow==='in'||msg.flow==='out'}}"><view idClient="{{msg.idClient}}" time="{{msg.time}}" flow="{{msg.flow}}" type="{{msg.type}}" class="_div data-v-4e6cde2f"><block wx:if="{{msg.avatar}}"><navigator class="msg-head _a data-v-4e6cde2f" href="{{msg.link}}"><image class="icon u-circle _img data-v-4e6cde2f" src="{{msg.avatar}}"></image></navigator></block><block wx:else><block wx:if="{{msg.type!=='notification'}}"><view class="msg-user _p data-v-4e6cde2f"><view class="_em data-v-4e6cde2f">{{msg.showTime}}</view>{{msg.from}}</view></block></block><block wx:if="{{msg.type==='text'}}"><label class="msg-text _span data-v-4e6cde2f"><rich-text nodes="{{msg.showText}}"></rich-text></label></block><block wx:else><block wx:if="{{msg.type==='custom-type1'}}"><label data-ref="mediaMsg" class="msg-text _span data-v-4e6cde2f vue-ref"></label></block><block wx:else><block wx:if="{{msg.type==='custom-type3'}}"><label data-ref="mediaMsg" class="msg-text _span data-v-4e6cde2f vue-ref"></label></block><block wx:else><block wx:if="{{msg.type==='image'}}"><label data-ref="mediaMsg" data-event-opts="{{[['tap',[['showFullImg',['$0'],['msg.originLink']]]]]}}" class="msg-text _span data-v-4e6cde2f vue-ref" catchtap="__e"></label></block><block wx:else><block wx:if="{{msg.type==='video'}}"><label data-ref="mediaMsg" class="msg-text _span data-v-4e6cde2f vue-ref"></label></block><block wx:else><block wx:if="{{msg.type==='audio'}}"><label data-event-opts="{{[['tap',[['playAudio',['$0','$event'],['msg']]]]]}}" class="{{['msg-text msg-audio _span data-v-4e6cde2f',(msg.unreadAudio)?'unreadAudio':'']}}" style="{{('width: '+msg.width)}}" bindtap="__e"><rich-text nodes="{{msg.showText}}"></rich-text></label></block><block wx:else><block wx:if="{{msg.type==='file'}}"><label class="msg-text _span data-v-4e6cde2f"><navigator href="{{msg.fileLink}}" target="_blank" class="_a data-v-4e6cde2f"><view class="u-icon icon-file _i data-v-4e6cde2f"></view>{{msg.showText}}</navigator></label></block><block wx:else><block wx:if="{{msg.type==='robot'}}"><label class="{{['msg-text _span data-v-4e6cde2f',(msg.robotFlow!=='out'&&!isRobot)?'msg-robot':'']}}"><block wx:if="{{msg.robotFlow==='out'}}"><view class="_div data-v-4e6cde2f">{{msg.showText}}</view></block><block wx:else><block wx:if="{{msg.subType==='bot'}}"><view class="_div data-v-4e6cde2f"><block wx:for="{{msg.message}}" wx:for-item="tmsgs" wx:for-index="__i0__"><view class="_div data-v-4e6cde2f"><block wx:for="{{tmsgs}}" wx:for-item="tmsg" wx:for-index="__i1__"><view class="_div data-v-4e6cde2f"><block wx:if="{{tmsg.type==='text'}}"><view class="_div data-v-4e6cde2f"><view class="_p data-v-4e6cde2f">{{tmsg.text}}</view></view></block><block wx:else><block wx:if="{{tmsg.type==='image'}}"><view class="_div data-v-4e6cde2f"><view class="_p data-v-4e6cde2f"><image src="{{tmsg.url}}" class="_img data-v-4e6cde2f"></image></view></view></block><block wx:else><block wx:if="{{tmsg.type==='url'}}"><view class="_div data-v-4e6cde2f"><navigator class="{{['_a data-v-4e6cde2f',tmsg.style]}}" href="{{tmsg.target}}" target="_blank"><block wx:if="{{tmsg.image}}"><view class="_div data-v-4e6cde2f"><block wx:for="{{tmsg.image}}" wx:for-item="tmsg2" wx:for-index="__i2__"><view class="_p data-v-4e6cde2f"><image src="{{tmsg2.url}}" class="_img data-v-4e6cde2f"></image></view></block></view></block><block wx:if="{{tmsg.text}}"><view class="_div data-v-4e6cde2f"><block wx:for="{{tmsg.text}}" wx:for-item="tmsg2" wx:for-index="__i3__"><view class="_p data-v-4e6cde2f">{{tmsg2.text}}</view></block></view></block></navigator></view></block><block wx:else><block wx:if="{{tmsg.type==='block'}}"><view class="_div data-v-4e6cde2f"><navigator class="{{['_a data-v-4e6cde2f',tmsg.style]}}" params="{{tmsg.params}}" target="{{tmsg.target}}" data-event-opts="{{[['tap',[['sendRobotBlockMsg',['$0','$1'],[[['msg.message','',__i0__],['','',__i1__]],'msg']]]]]}}" bindtap="__e"><block wx:if="{{tmsg.image}}"><view class="_div data-v-4e6cde2f"><block wx:for="{{tmsg.image}}" wx:for-item="tmsg2" wx:for-index="__i4__"><view class="_p data-v-4e6cde2f"><image src="{{tmsg2.url}}" class="_img data-v-4e6cde2f"></image></view></block></view></block><block wx:if="{{tmsg.text}}"><view class="_div data-v-4e6cde2f"><block wx:for="{{tmsg.text}}" wx:for-item="tmsg2" wx:for-index="__i5__"><view class="_p data-v-4e6cde2f">{{tmsg2.text}}</view></block></view></block></navigator></view></block></block></block></block></view></block></view></block></view></block><block wx:else><block wx:if="{{msg.subType==='faq'}}"><view class="_div data-v-4e6cde2f"><view class="_p data-v-4e6cde2f">{{msg.message.answer}}</view></view></block></block></block><block wx:if="{{msg.robotFlow!=='out'&&!isRobot}}"><label class="msg-link _span data-v-4e6cde2f"><navigator data-event-opts="{{[['tap',[['continueRobotMsg',['$0'],['msg.content.robotAccid']]]]]}}" class="link-right _a data-v-4e6cde2f" bindtap="__e">继续对话</navigator></label></block></label></block><block wx:else><block wx:if="{{msg.type==='notification'}}"><label class="msg-text notify _span data-v-4e6cde2f">{{msg.showText}}</label></block><block wx:else><label class="msg-text _span data-v-4e6cde2f"><rich-text nodes="{{msg.showText}}"></rich-text></label></block></block></block></block></block></block></block></block></block><block wx:if="{{msg.status==='fail'}}"><label class="msg-failed _span data-v-4e6cde2f"><view class="weui-icon-warn _i data-v-4e6cde2f"></view></label></block><block wx:if="{{teamMsgUnRead>=0}}"><navigator class="msg-unread _a data-v-4e6cde2f" href="{{'#/msgReceiptDetail/'+msg.to+'-'+msg.idServer}}">{{teamMsgUnRead>0?teamMsgUnRead+'人未读':'全部已读'}}</navigator></block></view></block></block></block></block></view>