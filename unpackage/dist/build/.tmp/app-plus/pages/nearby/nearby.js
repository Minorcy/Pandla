(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/nearby/nearby"],{"0057":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.nearbyInfo,function(e,n){var o=t._f("toFixed")(e.scope,2);return{$orig:t.__get_orig(e),f0:o}}));t.$mp.data=Object.assign({},{$root:{l0:n}})},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},"075d":function(t,e,n){},1655:function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;n("996b");var a=n("0be9"),r=function(){return n.e("components/lu-popup-wrapper/lu-popup-wrapper").then(n.bind(null,"ed57"))},u={components:{luPopupWrapper:r},data:function(){return{searchValue:"",tga:"",popupWrapper:!0,array:["10","50",">100"],scope:10,longitude:"",latitude:"",nearbyInfo:""}},methods:{setScope:function(e){var n=this;this.scope=e,(0,a.checkNearbyPerson)(this.longitude,this.latitude,this.scope,this.tga).then(function(e){n.nearbyInfo=e,t.setStorageSync("nearbyInfo",e)}),this.popupWrapper=!0,this.close()},toUserInfo:function(e,n){t.navigateTo({url:"/pages/daily/userInfo?uid="+e+"&distance="+n})},updateLab:function(e){var n=t.getStorageSync("USERS_KEY").id;n==e&&t.redirectTo({url:"tga"})},search:function(){var e=this,n=t.getStorageSync("nearbyInfo"),o=new RegExp("("+e.searchValue+")","img"),a=[];n.forEach(function(t){o.test(t.name)&&a.push(t),o.test(t.lable)&&a.push(t)}),0!=a.length?(e.nearbyInfo=[],e.nearbyInfo=e.repeat(a)):t.showToast({icon:"none",title:"暫無搜索結果"})},repeat:function(t){for(var e=[],n=0;n<t.length;n++){for(var o=!0,a=0;a<e.length;a++)t[n].uid==e[a].uid&&(o=!1);o&&e.push(t[n])}return e},show:function(){this.$refs.luPopupWrapper.show()},close:function(){this.$refs.luPopupWrapper.close()}},onNavigationBarButtonTap:function(){1==this.popupWrapper?(this.popupWrapper=!1,this.show()):0==this.popupWrapper&&(this.popupWrapper=!0,this.close())},onLoad:function(e){e.tga&&(this.tga=e.tga),""!=this.tga&&t.setStorageSync("tga",this.tga),t.showLoading({title:"加载中"});var n=this;t.getLocation({type:"wgs84",success:function(e){console.log(o("当前位置的经度："+e.longitude," at pages\\nearby\\nearby.vue:167")),n.longitude=e.longitude,console.log(o("当前位置的纬度："+e.latitude," at pages\\nearby\\nearby.vue:169")),n.latitude=e.latitude,(0,a.checkNearbyPerson)(n.longitude,n.latitude,n.scope,n.tga).then(function(e){n.nearbyInfo=e,t.setStorageSync("nearbyInfo",e),t.hideLoading()})},fail:function(){t.showToast({icon:"none",title:"获取定位权限失败"}),t.hideLoading()}})},onPullDownRefresh:function(){this.nearbyInfo="";var e=this;t.getLocation({type:"wgs84",success:function(n){e.longitude=n.longitude,e.latitude=n.latitude,(0,a.checkNearbyPerson)(e.longitude,e.latitude,e.scope,e.tga).then(function(n){e.nearbyInfo=n,t.setStorageSync("nearbyInfo",n)})}}),setTimeout(function(){t.stopPullDownRefresh()},800)}};e.default=u}).call(this,n("6e42")["default"],n("0de9")["default"])},"19d4":function(t,e,n){"use strict";var o=n("075d"),a=n.n(o);a.a},"4fd8":function(t,e,n){"use strict";n.r(e);var o=n("0057"),a=n("6906");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n("19d4");var u=n("2877"),i=Object(u["a"])(a["default"],o["a"],o["b"],!1,null,"51475f0c",null);e["default"]=i.exports},6906:function(t,e,n){"use strict";n.r(e);var o=n("1655"),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e["default"]=a.a},"6c33":function(t,e,n){"use strict";(function(t){n("274e"),n("921b");o(n("66fd"));var e=o(n("4fd8"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])}},[["6c33","common/runtime","common/vendor"]]]);