(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/daily/daily"],{3733:function(t,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;e(i("b47e")),e(i("996b"));var o=i("0be9");function e(t){return t&&t.__esModule?t:{default:t}}function s(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var l={data:function(){return{dynInfo:"",commentInfo:"",bulletList:[],following:!1,did:0,uid:0,cid:0,like:0,beStatus:!1,commCount:"",commContent:"",commplaceholder:"為保證用戶隱私，只可以看自己的評論",addType:"",array:["取消關注","屏蔽用戶","舉報用戶"],pickIndex:0,likeNumber:0,showComment:!1,count:10,loading:1,flog:!0,time:"",disabled:!1,isLove:!1,animation:!1,height:"",doomm:!0}},methods:{findDyn:function(n){var i=this;(0,o.findAllDyn)(0).then(function(t){i.dynInfo=t,i.commCount=t[0].com_count,console.log(t," at pages\\daily\\daily.vue:167"),1==n&&(i.did=i.dynInfo[0].id,i.uid=i.dynInfo[0].uid),i.getAllBullet(),(0,o.likeCount)(i.did).then(function(t){i.like=t})}),setTimeout(function(){t.hideLoading()},800)},loadFindDyn:function(n){var i=this;(0,o.findAllDyn)(this.count).then(function(n){i.count+=n.length,i.dynInfo=i.dynInfo.concat(n),0==n.length&&t.showToast({icon:"none",title:"没有更多数据了"})})},goBack:function(){t.switchTab({url:"../main/main"})},publishDyn:function(){var n=this;(0,o.getImgTemp)().then(function(i){n.$store.commit("setImgTemp",i),console.log(n.$store.state.imgTemp," at pages\\daily\\daily.vue:206"),t.navigateTo({url:"publish"}),n.findDyn(1)})},userFollow:function(){var t=this;0==this.following?(0,o.concern)(1,this.uid).then(function(n){t.following=!0,t.findDyn(2)}):this.following=!1},bindPickerChange:function(t){var n=this;this.pickIndex=t.target.value,0==t.target.value&&(this.following=!1,console.log(this.uid," at pages\\daily\\daily.vue:228"),(0,o.concern)(2,this.uid).then(function(t){n.findDyn()}))},behaviour:function(){0==this.beStatus?this.beStatus=!0:1==this.beStatus&&(this.beStatus=!1)},userInfo:function(){t.navigateTo({url:"/pages/daily/userInfo?uid="+this.uid})},likePerson:function(n,i){var e=this;this.dynInfo[i].isLike=1,1==n?t.showToast({icon:"none",title:"不可以給自己點贊哦"}):(this.likeNumber++,t.showToast({icon:"none",title:"點贊了"+this.likeNumber+"次"}),(0,o.like)(this.did,1).then(function(t){(0,o.likeCount)(e.did).then(function(t){e.like=t,e.animation=!0})}),this.animation=!1)},hid:function(){this.flog||(this.showComment=!1)},showComm:function(){var t=this;1==this.showComment?this.showComment=!1:this.showComment=!0,(0,o.getComment)(this.did).then(function(n){t.commentInfo=n,console.log(t.commentInfo," at pages\\daily\\daily.vue:285")}),this.flog=!1},hidComm:function(){1==this.showComment?this.showComment=!1:this.showComment=!0},moveHandle:function(){},swiperChange:function(t){var n=this;this.following=!1,this.showComment=!1,this.addType="",this.commplaceholder="為保證用戶隱私，只可以看自己的評論",this.commentInfo="",this.likeNumber=0,this.isLove=!1,this.did=this.dynInfo[t.detail.current].id,this.uid=this.dynInfo[t.detail.current].uid,this.commCount=this.dynInfo[t.detail.current].com_count,(0,o.likeCount)(this.did).then(function(t){n.like=t}),this.getAllBullet();var i=this.dynInfo.length;t.detail.current+1==this.count&&(console.log("上拉"," at pages\\daily\\daily.vue:313"),this.loading=2,this.loadFindDyn(i)),0==t.detail.current&&this.findDyn(1)},addComm:function(){var t=this;this.disabled=!0,""!=this.commContent&&("reply"==this.addType?(console.log("刚刚是回复"," at pages\\daily\\daily.vue:328"),(0,o.reply)(this.cid,this.commContent).then(function(n){t.findDyn(2),t.addType="",t.commplaceholder="為保證用戶隱私，只可以看自己的評論",t.disabled=!1})):(console.log("刚刚是評論"," at pages\\daily\\daily.vue:338"),(0,o.addComment)(this.commContent,this.did).then(function(n){(0,o.getComment)(t.did).then(function(n){t.commentInfo=n,t.commContent="",t.addType="",t.commplaceholder="為保證用戶隱私，只可以看自己的評論",t.disabled=!1}),t.getAllBullet(),t.findDyn(2)})))},replyComm:function(n,i,o){o!=t.getStorageSync("USERS_KEY").id?(this.commplaceholder="@"+i,this.addType="reply",this.cid=n):t.showToast({icon:"none",title:"不能自己回復自己哦"})},getAllBullet:function(){var t=this;this.bulletList=[],(0,o.getBullet)(this.did).then(function(n){for(var o=n.content.length,e=0;e<o;e++)t.bulletList.push(new i(n.content[e],parseInt(Math.random()*(t.height-60+1)+60,10),Math.ceil(10*Math.random()),t.getRandomColor()))});var n=0,i=function t(i,o,e,l){s(this,t),this.text=i,this.top=o,this.time=e,this.color=l,this.display=!0,this.id=n++}},getRandomColor:function(){for(var t=[],n=0;n<3;++n){var i=Math.floor(256*Math.random()).toString(16);i=1==i.length?"0"+i:i,t.push(i)}return"#"+t.join("")},showDoomm:function(){1==this.doomm?this.doomm=!1:this.doomm=!0}},onLoad:function(){this.findDyn(1),t.showLoading({title:"加载中"}),t.getSystemInfo({success:function(t){this.height=t.windowHeight}})},onShow:function(){this.findDyn(1),t.showLoading({title:"加载中"})},onReachBottom:function(){console.log("onReachBottom"," at pages\\daily\\daily.vue:431")},onPullDownRefresh:function(){this.loadFindDyn(),setTimeout(function(){t.stopPullDownRefresh()},1e3)}};n.default=l}).call(this,i("6e42")["default"])},"528f":function(t,n,i){"use strict";i.r(n);var o=i("6b3a"),e=i("c4b0");for(var s in e)"default"!==s&&function(t){i.d(n,t,function(){return e[t]})}(s);i("69e9");var l=i("2877"),a=Object(l["a"])(e["default"],o["a"],o["b"],!1,null,"7bf7c021",null);n["default"]=a.exports},"69e9":function(t,n,i){"use strict";var o=i("9551"),e=i.n(o);e.a},"6b3a":function(t,n,i){"use strict";var o=function(){var t=this,n=t.$createElement;t._self._c},e=[];i.d(n,"a",function(){return o}),i.d(n,"b",function(){return e})},9551:function(t,n,i){},c4b0:function(t,n,i){"use strict";i.r(n);var o=i("3733"),e=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(n,t,function(){return o[t]})}(s);n["default"]=e.a}},[["8fd3","common/runtime","common/vendor"]]]);