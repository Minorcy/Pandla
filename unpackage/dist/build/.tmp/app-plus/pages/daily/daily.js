(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/daily/daily"],{"0bfc":function(t,n,o){"use strict";var e=function(){var t=this,n=t.$createElement,o=(t._self._c,t.__map(t.commentInfo,function(n,o){var e=t._f("stringifyDate")(n.create_time);return{$orig:t.__get_orig(n),f0:e}}));t.$mp.data=Object.assign({},{$root:{l0:o}})},i=[];o.d(n,"a",function(){return e}),o.d(n,"b",function(){return i})},"528f":function(t,n,o){"use strict";o.r(n);var e=o("0bfc"),i=o("c4b0");for(var a in i)"default"!==a&&function(t){o.d(n,t,function(){return i[t]})}(a);o("d8be");var s=o("2877"),l=Object(s["a"])(i["default"],e["a"],e["b"],!1,null,"f9b64fc8",null);n["default"]=l.exports},"8fd3":function(t,n,o){"use strict";(function(t){o("274e"),o("921b");e(o("66fd"));var n=e(o("528f"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,o("6e42")["createPage"])},b946:function(t,n,o){"use strict";(function(t,e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(o("d3df")),a=o("0be9");function s(t){return t&&t.__esModule?t:{default:t}}function l(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var c=function(){return o.e("components/chatinput").then(o.bind(null,"adfd"))},d={data:function(){return{currentIndex:0,dynInfo:"",uid:"",did:"",cid:"",index:"",likeNumber:0,animation:!1,showComment:!1,bulletList:[],doomm:!0,commCount:0,commentInfo:"",commplaceholder:"為保證用戶隱私，只可以看自己的評論",commContent:"",disabled:!1,addType:"",count:10,height:"60%",position:"absolute",flag:0,text:"",lastX:0,lastY:0}},components:{chatInput:c},methods:{handletouchmove:function(n){if(0===this.flag){var o=n.touches[0].pageX,i=n.touches[0].pageY,a=o-this.lastX,s=i-this.lastY,l="";this.mindex=-1,Math.abs(a)>Math.abs(s)?a<0?(l="向左滑动",console.log(t("向左滑动"," at pages\\daily\\daily.vue:159")),this.flag=1):a>30&&(console.log(t(a," at pages\\daily\\daily.vue:164")),l="向右滑动",console.log(t("向右滑动"," at pages\\daily\\daily.vue:166")),e.navigateBack({delta:1}),this.flag=2):s<0?(l="向上滑动",this.flag=3):s>0&&(l="向下滑动",this.flag=4),this.lastX=o,this.lastY=i,this.text=l}},handletouchstart:function(t){this.lastX=t.touches[0].pageX,this.lastY=t.touches[0].pageY},handletouchend:function(t){this.flag=0,this.text="没有滑动"},blur:function(){this.height="60%",this.position="absolute"},focus:function(){this.height="30%",this.position="fixed"},transitioning:function(){},toMap:function(n,o,i){""==n&&""==o&&""==i||e.openLocation({latitude:Number(n),longitude:Number(o),name:i,success:function(n){console.log(t(n," at pages\\daily\\daily.vue:224"))}})},findDyn:function(){var t=this;(0,a.findAllDyn)(0).then(function(n){t.dynInfo=n,t.uid=n[0].uid,t.index=0,t.did=n[0].id}),this.getAllBullet()},loadFindDyn:function(){var t=this;(0,a.findAllDyn)(this.count).then(function(n){t.count+=n.length,t.dynInfo=t.dynInfo.concat(n),0==n.length&&e.showToast({icon:"none",title:"没有更多数据了"})})},userFollow:function(t,n){var o=this;(0,a.concern)(1,t).then(function(t){o.dynInfo[n].following=1})},userInfo:function(t){e.navigateTo({url:"/pages/daily/userInfo?uid="+t})},likePerson:function(t,n,o){var i=this;1==t?e.showToast({icon:"none",title:"不可以給自己點贊哦"}):(this.likeNumber++,(0,a.like)(n,1).then(function(t){i.animation=!0,(0,a.likeCount)(n).then(function(t){i.dynInfo[o].isLike=1,i.dynInfo[o].like_count=t,i.dynInfo[o].pan=t/10,e.showToast({icon:"none",title:"點贊了"+i.likeNumber+"次"})})}),this.animation=!1)},getAllBullet:function(){var n=this;this.bulletList=[],(0,a.getBullet)(this.did).then(function(t){var o=t.content.length;if(0!=o)for(var i=0;i<o;i++)n.bulletList.push(new e(t.content[i],parseInt(500*Math.random(),10),Math.ceil(10*Math.random())))});var o=0,e=function t(n,e,i,a){l(this,t),this.text=n,this.top=e,this.time=i,this.display=!0,this.id=o++};console.log(t(this.bulletList," at pages\\daily\\daily.vue:314"))},showDoomm:function(){1==this.doomm?this.doomm=!1:this.doomm=!0},showComm:function(n){var o=this;1==this.showComment?this.showComment=!1:this.showComment=!0,(0,a.getComment)(n).then(function(n){o.commentInfo=n,o.commCount=n.length,console.log(t(o.commentInfo," at pages\\daily\\daily.vue:325"))})},hidComm:function(){1==this.showComment?this.showComment=!1:this.showComment=!0,this.commentInfo="",this.commCount=0,this.commContent="",this.disabled=!1},replyComm:function(t,n,o){o!=e.getStorageSync("USERS_KEY").id?(this.commplaceholder="@"+n,this.addType="reply",this.cid=t):e.showToast({icon:"none",title:"不能自己回復自己哦"})},addComm:function(){var n=this;this.disabled=!0,""!=this.commContent&&("reply"==this.addType?(console.log(t("刚刚是回复"," at pages\\daily\\daily.vue:353")),(0,a.reply)(this.cid,this.commContent).then(function(o){if(console.log(t(o," at pages\\daily\\daily.vue:355")),null==o)return e.showToast({icon:"none",title:"只能回復一次哦"}),n.addType="",n.commContent="",n.commplaceholder="為保證用戶隱私，只可以看自己的評論",void(n.disabled=!1);(0,a.getComment)(n.did).then(function(t){n.commentInfo=t,n.addType="",n.commContent="",n.commplaceholder="為保證用戶隱私，只可以看自己的評論",n.disabled=!1,n.commCount=t.length,n.dynInfo[n.index].com_count=t.length})})):(console.log(t("刚刚是評論"," at pages\\daily\\daily.vue:378")),(0,a.addComment)(this.commContent,this.did).then(function(t){(0,a.getComment)(n.did).then(function(t){n.commentInfo=t,n.commCount=t.length,n.commContent="",n.addType="",n.commplaceholder="為保證用戶隱私，只可以看自己的評論",n.disabled=!1,n.dynInfo[n.index].com_count=t.length})}))),e.hideKeyboard()},publishDyn:function(){var n=this;(0,a.getImgTemp)().then(function(o){n.$store.commit("setImgTemp",o),console.log(t(n.$store.state.imgTemp," at pages\\daily\\daily.vue:402")),e.navigateTo({url:"publish"}),n.findDyn(1)})},moveHandle:function(){},swiperChange:function(t){var n=this;this.did=this.dynInfo[t.detail.current].id,this.likeNumber=0,this.index=t.detail.current,this.uid=this.dynInfo[t.detail.current].uid,(0,a.checkIsCon)(this.dynInfo[t.detail.current].uid).then(function(o){o?n.dynInfo[t.detail.current].following=1:0==o&&(n.dynInfo[t.detail.current].following=0)}),this.getAllBullet(),t.detail.current+1==this.count&&(setTimeout(function(){e.showLoading({title:"加载中"}),n.loadFindDyn()},500),setTimeout(function(){e.hideLoading()},1500)),0==t.detail.current&&setTimeout(function(){n.findDyn()},2e3)},goChange:function(){this.item_id="slide1"},behaviour:function(){var n=this;e.showActionSheet({itemList:["取消關注","屏蔽用戶","舉報用戶"],success:function(o){if(console.log(t("选中了第"+o.tapIndex+"个按钮"," at pages\\daily\\daily.vue:451")),0==o.tapIndex){if(0==n.dynInfo[n.index].following)return void e.showToast({icon:"none",title:"暫未關注該用戶"});e.showModal({title:"",content:"确定取消關注",success:function(o){o.confirm?(0,a.concern)(2,n.uid).then(function(t){n.dynInfo[n.index].following=0}):o.cancel&&console.log(t("用户点击取消"," at pages\\daily\\daily.vue:469"))}})}if(1==o.tapIndex&&e.showModal({title:"",content:"屏蔽用戶",success:function(n){n.confirm?console.log(t("用户点击确定"," at pages\\daily\\daily.vue:480")):n.cancel&&console.log(t("用户点击取消"," at pages\\daily\\daily.vue:482"))}}),2==o.tapIndex){var i={did:n.did,id:n.uid,name:n.dynInfo[n.index].name,avatar:n.dynInfo[n.index].portrait};e.showModal({title:"",content:"舉報用戶",success:function(n){n.confirm?(console.log(t("用户点击确定"," at pages\\daily\\daily.vue:499")),e.navigateTo({url:"/pages/msg/report?userInfo="+JSON.stringify(i)})):n.cancel&&console.log(t("用户点击取消"," at pages\\daily\\daily.vue:504"))}})}},fail:function(n){console.log(t(n.errMsg," at pages\\daily\\daily.vue:511"))}})}},filters:{stringifyDate:function(t){return t=Number(t),i.default.formatDate(t,!0)}},onLoad:function(){this.cid=e.getStorageSync("USERS_KEY").id,this.findDyn()}};n.default=d}).call(this,o("0de9")["default"],o("6e42")["default"])},c4b0:function(t,n,o){"use strict";o.r(n);var e=o("b946"),i=o.n(e);for(var a in e)"default"!==a&&function(t){o.d(n,t,function(){return e[t]})}(a);n["default"]=i.a},c53b:function(t,n,o){},d8be:function(t,n,o){"use strict";var e=o("c53b"),i=o.n(e);i.a}},[["8fd3","common/runtime","common/vendor"]]]);