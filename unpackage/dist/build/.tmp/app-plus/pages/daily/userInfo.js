(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/daily/userInfo"],{"1efe":function(t,n,e){"use strict";e.r(n);var i=e("8eb9"),o=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(n,t,function(){return i[t]})}(s);n["default"]=o.a},"8eb9":function(t,n,e){"use strict";(function(t,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=u(e("e9e9")),s=(e("2f62"),e("9fe6"));function u(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{userInfo:"",dynInfo:"",statusInfo:"",uid:"",distance:"",isFollow:0,isMe:!0,lastTime:"",fnasList:"",loadingCount:9,flog:!1,isShow:!1}},methods:{imgError:function(){this.userInfo.portrait="../../static/img/error/defaultAvatar.png"},getUserInfo:function(){var n=this;(0,s.getInfo)(this.uid).then(function(t){n.userInfo=t,null!=n.userInfo.signature&&""!=n.userInfo.signature||(n.userInfo.signature="這家夥很懶，還沒有簽名"),n.userInfo.site=n.getArea(n.userInfo.site)}),(0,s.checkMeAllDyn)(this.uid).then(function(e){if(console.log(t(e," at pages\\daily\\userInfo.vue:623")),n.dynInfo=e,e)var i=0,o=function(){i<n.dynInfo.length?(n.$set(n.dynInfo[i],"active",!0),i++):clearInterval(s)},s=setInterval(function(){o()},100);else n.isShow=!0}),(0,s.getLastTime)(this.uid).then(function(t){n.lastTime=""!=t?o.default.formatDate(Number(t),!0):"一天前"}),(0,s.getFans)().then(function(t){n.fnasList=t})},deleteDyn:function(n,e){var o=this;i.showModal({title:"",content:"确定删除照片",success:function(i){i.confirm?(0,s.deleteDyn)(n).then(function(t){o.dynInfo.splice(e,1)}):i.cancel&&console.log(t("用户点击取消"," at pages\\daily\\userInfo.vue:667"))}})},getIsCon:function(){var t=this;(0,s.checkIsCon)(this.uid).then(function(n){t.isFollow=n})},follow:function(){if(1==this.isFollow)(0,s.concern)(2,this.uid),this.isFollow=0;else if(0==this.isFollow){(0,s.concern)(1,this.uid);for(var t=0,n=this.fnasList.length;t<n;t++)if(this.fnasList[t].id==this.uid)return void(this.isFollow=2);this.isFollow=1}},enterChat:function(){i.navigateTo({url:"/pages/msg/chat?id="+this.uid})},checkImg:function(t){var n=[];n.push(t),i.previewImage({urls:n})},preview:function(t,n){for(var e=[],o=0;o<this.dynInfo.length;o++)e.push(this.dynInfo[o].images);"por"==t&&(e=[this.userInfo.portrait]),"dyn"==t&&(e=e),i.previewImage({current:n,urls:e})},toDetails:function(t){i.navigateTo({url:"userDyn?id="+this.uid+"&index="+t})},downCallback:function(n){console.log(t("2"," at pages\\daily\\userInfo.vue:724"))},upCallback:function(n){n.endSuccess(),n.endErr(),console.log(t("1"," at pages\\daily\\userInfo.vue:729"))},getArea:function(t){var n={},e=0,i=t.indexOf("省");-1==i?(e=t.indexOf("自治区"),n.Province=-1!=e?t.substring(0,e+3):t.substring(0,0)):n.Province=t.substring(0,i+1);var o=t.indexOf("市");n.City=-1==e?t.substring(e+1,o+1):0==e?t.substring(i+1,o+1):t.substring(e+3,o+1);var s=t.lastIndexOf("区");return-1==s?(s=t.indexOf("县"),n.Country=t.substring(o+1,s+1)):n.Country=t.substring(o+1,s+1),n.City}},onReachBottom:function(){},onLoad:function(t){var n=this;this.uid=t.uid,this.getUserInfo(),this.getIsCon();var e=i.getStorageSync("USERS_KEY").id;this.uid==e&&(this.isMe=!1,i.setNavigationBarTitle({title:"我的主頁"})),(0,s.getToUserLocation)(this.uid).then(function(t){i.getLocation({type:"wgs84",success:function(e){(0,s.getDistance)(t.lat,t.lng,e.latitude,e.longitude).then(function(t){n.distance=t})},fail:function(){i.showToast({icon:"none",title:"獲取定位權限失敗"})}})})},filters:{stringifyDate:function(t){return t=Number(t),o.default.formatDate(t,!0)}}};n.default=a}).call(this,e("0de9")["default"],e("6e42")["default"])},"9b01":function(t,n,e){"use strict";e.r(n);var i=e("aecb"),o=e("1efe");for(var s in o)"default"!==s&&function(t){e.d(n,t,function(){return o[t]})}(s);e("faf8");var u=e("2877"),a=Object(u["a"])(o["default"],i["a"],i["b"],!1,null,"33817347",null);n["default"]=a.exports},a7f7:function(t,n,e){"use strict";(function(t){e("cbab"),e("921b");i(e("66fd"));var n=i(e("9b01"));function i(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("6e42")["createPage"])},aecb:function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=(t._self._c,t._f("toFixed")(t.distance,2));t.$mp.data=Object.assign({},{$root:{f0:e}})},o=[];e.d(n,"a",function(){return i}),e.d(n,"b",function(){return o})},d9fc:function(t,n,e){},faf8:function(t,n,e){"use strict";var i=e("d9fc"),o=e.n(i);o.a}},[["a7f7","common/runtime","common/vendor"]]]);