(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{6104:function(t,e,n){},"6fc2":function(t,e,n){"use strict";n.r(e);var a=n("896f"),r=n("ef33");for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);n("f46c");var i=n("2877"),u=Object(i["a"])(r["default"],a["a"],a["b"],!1,null,"18871f1e",null);e["default"]=u.exports},"896f":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r})},e243:function(t,e,n){"use strict";(function(t){n("cbab"),n("921b");a(n("66fd"));var e=a(n("6fc2"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},e83a:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=u(n("a34a")),r=u(n("55c6")),o=n("2f62"),i=n("9fe6");function u(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,a,r,o,i){try{var u=t[o](i),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(a,r)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function i(t){s(o,a,r,i,u,"next",t)}function u(t){s(o,a,r,i,u,"throw",t)}i(void 0)})}}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){l(t,e,n[e])})}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g={data:function(){return{tokens:[],userInfo:"",socialInfo:"",userId:t.getStorageSync("USERS_KEY").id,avatar:"../../static/img/user/upload.png",settings:[{src:"../../static/img/user/introduce.svg",url:"../setting/introduce",label:"關於我們",expla:!0},{src:"../../static/img/user/strategy.svg",url:"../setting/strategy",label:"星球攻略",expla:""},{src:"../../static/img/user/plantBase.svg",url:"../base/base",label:"招募節點",expla:""},{src:"../../static/img/user/lianxi.svg",url:"../setting/contactUs",label:"聯繫我們"},{src:"../../static/img/user/option.svg",url:"../setting/setting",label:"設置",expla:""}]}},computed:f({},(0,o.mapState)(["hasLogin","forcedLogin"])),methods:f({},(0,o.mapMutations)(["logout"]),{imgError:function(){this.avatar="../../static/img/error/defaultAvatar.png",t.showModal({title:"",content:"頭像加載失敗，請重新上傳頭像",confirmText:"確定"})},bindLogout:function(){var e=this;t.showModal({title:"",content:"點擊確定後退出",confirmText:"確定",success:function(n){n.confirm&&(t.reLaunch({url:"../login/login"}),e.logout(),(0,i.logout)(),t.removeStorageSync("USERS_KEY"),t.removeStorageSync("TOKEN_KEY"),t.removeStorageSync("USERS_DOT"),r.default.closeSocket())}})},getUserInfo:function(){var t=this;(0,i.findByID)().then(function(e){t.userInfo=e,t.avatar=e.portrait,null!=t.userInfo.signature&&""!=t.userInfo.signature||(t.userInfo.signature="這家夥很懶，還沒有簽名")})},getSocialInfo:function(){var t=this;(0,i.getAllSocialInfo)().then(function(e){t.socialInfo=e})},uploadAvatar:function(){var e=this,n=t.getStorageSync("USERS_KEY");(0,i.upPicture)(this.userId).then(function(a){e.avatar=a.id,n.portrait=a.id,t.setStorageSync("USERS_KEY",n)})},touserInfo:function(e){t.navigateTo({url:"album?uid="+e})},toAsset:function(){t.navigateTo({url:"/pages/ledger/asset"})},toPan:function(){t.navigateTo({url:"/pages/pan/pan"})},toStrategy:function(){t.navigateTo({url:"/pages/strategy/strategy"})},toEntertain:function(){t.navigateTo({url:"/pages/entertain/entertain"})},toWelfare:function(){t.navigateTo({url:"/pages/welfare/welfare"})},getToken:function(){var t=c(a.default.mark(function t(e){var n;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.homeToken(e).getIndexPan();case 2:n=t.sent,200==n.data.status?this.tokens=n.data.data:404==n.data.status&&(this.tokens="");case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),noDot:function(){this.settings[0].expla=!1}}),onNavigationBarButtonTap:function(){t.navigateTo({url:"update"})},onLoad:function(){var e=t.getStorageSync("USERS_DOT");e&&(this.settings[0].expla=!1)},onShow:function(){this.getUserInfo(),this.getSocialInfo();var e=t.getStorageSync("TOKEN_KEY");this.getToken(e);var n=t.getStorageSync("USERS_DOT");n&&(this.settings[0].expla=!1)}};e.default=g}).call(this,n("6e42")["default"])},ef33:function(t,e,n){"use strict";n.r(e);var a=n("e83a"),r=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=r.a},f46c:function(t,e,n){"use strict";var a=n("6104"),r=n.n(a);r.a}},[["e243","common/runtime","common/vendor"]]]);