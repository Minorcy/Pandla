(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/update"],{"871e":function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement;e._self._c},c=[];t.d(n,"a",function(){return a}),t.d(n,"b",function(){return c})},a19c:function(e,n,t){"use strict";(function(e,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=t("9fe6"),r=t("4752"),u=function(){return t.e("components/m-input").then(t.bind(null,"4df5"))},o=function(){return t.e("components/logo").then(t.bind(null,"6d42"))},i=function(){return Promise.all([t.e("common/vendor"),t.e("components/xuan-linkAddress/xuan-linkAddress")]).then(t.bind(null,"d9c3"))},s={components:{mInput:u,logo:o,linkAddress:i},data:function(){return{height:"550rpx",accArray:["1","0","0.5","0.5偏0","0.5偏1","S","M","其它"],accIndex:0,raceArray:["亚洲人","黑人","拉美人","中东人","混血","白人","其它"],raceIndex:0,userId:e.getStorageSync("USERS_KEY").id,userInfo:{age:"",name:"",signature:"",site:"請選擇",stature:"",weight:"",acctType:"",race:""},avatar:"../../static/img/user/upload.png"}},methods:{popup_bottom:function(){this.height="550rpx",this.show_popup()},show_popup:function(){this.$refs.linkAddress.show()},confirmCallback:function(e){console.log(a(e," at pages\\user\\update.vue:105")),this.userInfo.site=e},bindAcc:function(e){this.accIndex=e.target.value,this.userInfo.acctType=this.accArray[this.accIndex]},bindRace:function(e){this.raceIndex=e.target.value},uploadAvatar:function(){var e=this;(0,c.upPicture)(this.userId).then(function(n){e.avatar=n.id})},update:function(){"../../static/img/user/upload.png"==this.avatar&&e.showToast({icon:"none",title:"請上傳头像"}),"請選擇"!=this.userInfo.site&&"请选择"!=this.userInfo.site?(this.userInfo.acctType=this.accArray[this.accIndex],this.userInfo.race=this.raceArray[this.raceIndex],console.log(a(this.userInfo," at pages\\user\\update.vue:139")),this.userInfo.name&&this.userInfo.age&&this.userInfo.acctType&&this.userInfo.stature&&this.userInfo.weight?(0,r.userValidate)(this.userInfo)&&(0,c.upInfo)(this.userInfo,this.userId).then(function(n){var t=e.getStorageSync("TOKEN_KEY");t?(0,c.findByID)().then(function(n){e.setStorageSync("USERS_KEY",n),e.switchTab({url:"user"})}):e.reLaunch({url:"../login/login"})}):e.showToast({icon:"none",title:"請完善信息"})):e.showToast({icon:"none",title:"請選擇位置"})},findInfo:function(){var e=this;(0,c.findByID)().then(function(n){null!=n.portrait&&""!=n.portrait&&(e.avatar=n.portrait),n.name&&("亚洲人"==n.race&&(e.raceIndex=0),"黑人"==n.race&&(e.raceIndex=1),"拉美人"==n.race&&(e.raceIndex=2),"中东人"==n.race&&(e.raceIndex=3),"混血"==n.race&&(e.raceIndex=4),"白人"==n.race&&(e.raceIndex=5),"其它"==n.race&&(e.raceIndex=6),"1"==n.acctType&&(e.accIndex=0),"0"==n.acctType&&(e.accIndex=1),"0.5"==n.acctType&&(e.accIndex=2),"0.5偏0"==n.acctType&&(e.accIndex=3),"0.5偏1"==n.acctType&&(e.accIndex=4),"S"==n.acctType&&(e.accIndex=5),"M"==n.acctType&&(e.accIndex=6),"其它"==n.acctType&&(e.accIndex=7),e.userInfo.name=n.name,e.userInfo.age=""+n.age,e.userInfo.stature=""+n.stature,e.userInfo.weight=""+n.weight,e.userInfo.site=n.site,e.userInfo.signature=n.signature)})}},onNavigationBarButtonTap:function(){this.update()},onShow:function(){e.getStorageSync("TOKEN_KEY")&&this.findInfo()}};n.default=s}).call(this,t("6e42")["default"],t("0de9")["default"])},b7cd:function(e,n,t){"use strict";t.r(n);var a=t("a19c"),c=t.n(a);for(var r in a)"default"!==r&&function(e){t.d(n,e,function(){return a[e]})}(r);n["default"]=c.a},bc64:function(e,n,t){"use strict";t.r(n);var a=t("871e"),c=t("b7cd");for(var r in c)"default"!==r&&function(e){t.d(n,e,function(){return c[e]})}(r);t("dc98");var u=t("2877"),o=Object(u["a"])(c["default"],a["a"],a["b"],!1,null,null,null);n["default"]=o.exports},c911:function(e,n,t){},dc98:function(e,n,t){"use strict";var a=t("c911"),c=t.n(a);c.a},dccb:function(e,n,t){"use strict";(function(e){t("cbab"),t("921b");a(t("66fd"));var n=a(t("bc64"));function a(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("6e42")["createPage"])}},[["dccb","common/runtime","common/vendor"]]]);