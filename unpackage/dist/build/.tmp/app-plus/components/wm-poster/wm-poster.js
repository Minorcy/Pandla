(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/wm-poster/wm-poster"],{2031:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r})},"51aa":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=i(n("a34a"));function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,a,r,i,u){try{var c=t[i](u),o=c.value}catch(s){return void n(s)}c.done?e(o):Promise.resolve(o).then(a,r)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var i=t.apply(e,n);function c(t){u(i,a,r,c,o,"next",t)}function o(t){u(i,a,r,c,o,"throw",t)}c(void 0)})}}var o={name:"wm-poster",props:{CanvasID:{Type:String,default:"PosterCanvas"},imgSrc:{Type:String,default:""},QrSrc:{Type:String,default:""},Title:{Type:String,default:""},TitleColor:{Type:String,default:"#333333"},LineType:{Type:[String,Boolean],default:!0},PriceTxt:{Type:String,default:""},PriceColor:{Type:String,default:"#000000"},OriginalTxt:{Type:String,default:""},OriginalColor:{Type:String,default:"#b8b8b8"},Width:{Type:String,default:750},CanvasBg:{Type:String,default:"#ffffff"},Referrer:{Type:String,default:""},ViewDetails:{Type:String,default:""}},data:function(){return{canvasW:0,canvasH:0,canvasImgSrc:"",ctx:null}},methods:{OnCanvas:function(){var e=c(r.default.mark(function e(){var n,i,u,c,o,s,f,l;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"生成海報中"}),a.ctx=t.createCanvasContext(a.CanvasID,this),n=t.upx2px(a.Width),i=t.upx2px(0),u=t.upx2px(180),0,e.next=6,a.getImageInfo({imgSrc:a.imgSrc});case 6:return c=e.sent,e.next=9,a.getImageInfo({imgSrc:a.QrSrc});case 9:o=e.sent,this.canvasH=c.height,s=[c.width,c.height],f=[o.width,o.height],l=n,s[0]!=l&&(s[1]=Math.floor(l/s[0]*s[1]),s[0]=l),f[0]!=u&&(f[1]=Math.floor(u/f[0]*f[1]),f[0]=u),a.canvasW=n,a.canvasH=s[1]+f[1]+28,this.canvasH=650,a.ctx.setFillStyle(a.CanvasBg),a.ctx.fillRect(0,0,n,a.canvasH),a.ctx.drawImage(c.path,i,i,s[0],s[1]),a.ctx.drawImage(o.path,this.canvasW/2-50,c.height/3+50,f[0],f[1]),setTimeout(function(){a.ctx.draw(!0,function(t){a.getNewImage()})},300);case 24:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),getImageInfo:function(){var e=c(r.default.mark(function e(n){var a;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=n.imgSrc,e.abrupt("return",new Promise(function(e,n){t.getImageInfo({src:a,success:function(t){e(t)},fail:function(t){n("err===>",t)}})}));case 2:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),getNewImage:function(){t.canvasToTempFilePath({canvasId:a.CanvasID,quality:1,complete:function(e){t.hideLoading(),a.$emit("success",e)}},this)}},mounted:function(){a=this,a.OnCanvas()}};e.default=o}).call(this,n("6e42")["default"])},"8b92":function(t,e,n){"use strict";n.r(e);var a=n("2031"),r=n("ed15");for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var u=n("2877"),c=Object(u["a"])(r["default"],a["a"],a["b"],!1,null,null,null);e["default"]=c.exports},ed15:function(t,e,n){"use strict";n.r(e);var a=n("51aa"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=r.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/wm-poster/wm-poster-create-component',
    {
        'components/wm-poster/wm-poster-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("8b92"))
        })
    },
    [['components/wm-poster/wm-poster-create-component']]
]);                
