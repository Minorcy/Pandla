(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/wm-poster/wm-poster"],{"0e86":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r})},"2f5c":function(t,e,n){"use strict";n.r(e);var a=n("0e86"),r=n("a8e0");for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var u=n("2877"),c=Object(u["a"])(r["default"],a["a"],a["b"],!1,null,null,null);e["default"]=c.exports},a8e0:function(t,e,n){"use strict";n.r(e);var a=n("fb44"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=r.a},fb44:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=u(n("a34a"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,a,r,i,u){try{var c=t[i](u),o=c.value}catch(s){return void n(s)}c.done?e(o):Promise.resolve(o).then(a,r)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var i=t.apply(e,n);function u(t){c(i,a,r,u,o,"next",t)}function o(t){c(i,a,r,u,o,"throw",t)}u(void 0)})}}var s={name:"wm-poster",props:{CanvasID:{Type:String,default:"PosterCanvas"},imgSrc:{Type:String,default:""},QrSrc:{Type:String,default:""},Title:{Type:String,default:""},TitleColor:{Type:String,default:"#333333"},LineType:{Type:[String,Boolean],default:!0},PriceTxt:{Type:String,default:""},PriceColor:{Type:String,default:"#000000"},OriginalTxt:{Type:String,default:""},OriginalColor:{Type:String,default:"#b8b8b8"},Width:{Type:String,default:750},Height:{Type:String,default:750},CanvasBg:{Type:String,default:"#ffffff"},Referrer:{Type:String,default:""},ViewDetails:{Type:String,default:""}},data:function(){return{canvasW:0,canvasH:0,canvasImgSrc:"",ctx:null}},methods:{OnCanvas:function(){var e=o(i.default.mark(function e(){var n,u,c,o,s,f,l,d;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"生成海報中"}),r.ctx=t.createCanvasContext(r.CanvasID,this),n=t.upx2px(r.Width),u=t.upx2px(0),c=t.upx2px(200),0,e.next=6,r.getImageInfo({imgSrc:r.imgSrc});case 6:return o=e.sent,e.next=9,r.getImageInfo({imgSrc:r.QrSrc});case 9:s=e.sent,this.canvasH=this.Height,f=[o.width,o.height],l=[s.width,s.height],d=n,f[0]!=d&&(f[1]=Math.floor(d/f[0]*f[1]),f[0]=d),l[0]!=c&&(l[1]=Math.floor(c/l[0]*l[1]),l[0]=c),r.canvasW=n,r.canvasH=f[1],console.log(a(f[1]," at components\\wm-poster\\wm-poster.vue:107")),r.ctx.setFillStyle(r.CanvasBg),r.ctx.fillRect(0,0,n,r.canvasH),r.ctx.drawImage(o.path,u,u,f[0],f[1]),r.ctx.drawImage(s.path,this.canvasW/2-l[1]/2,.75*this.canvasH,l[0],l[1]),setTimeout(function(){r.ctx.draw(!0,function(t){r.getNewImage()})},300);case 24:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),getImageInfo:function(){var e=o(i.default.mark(function e(n){var a;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=n.imgSrc,e.abrupt("return",new Promise(function(e,n){t.getImageInfo({src:a,success:function(t){e(t)},fail:function(t){n("err===>",t)}})}));case 2:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),getNewImage:function(){t.canvasToTempFilePath({canvasId:r.CanvasID,quality:1,complete:function(e){t.hideLoading(),r.$emit("success",e)}},this)}},mounted:function(){r=this,r.OnCanvas()}};e.default=s}).call(this,n("6e42")["default"],n("0de9")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/wm-poster/wm-poster-create-component',
    {
        'components/wm-poster/wm-poster-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("2f5c"))
        })
    },
    [['components/wm-poster/wm-poster-create-component']]
]);
