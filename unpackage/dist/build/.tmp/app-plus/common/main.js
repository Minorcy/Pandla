(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"17a7":function(t,e,n){"use strict";n.r(e);var s=n("ce3e"),r=n.n(s);for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);e["default"]=r.a},"313e":function(t,e,n){"use strict";var s=n("680c"),r=n.n(s);r.a},"4be6":function(t,e,n){"use strict";(function(t){n("274e"),n("921b");var e=c(n("66fd")),s=c(n("c4dd")),r=c(n("11b2")),o=c(n("98c6")),a=c(n("e3c4"));n("de66");var i=c(n("3850")),u=c(n("6205"));function c(t){return t&&t.__esModule?t:{default:t}}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),s.forEach(function(e){l(t,e,n[e])})}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.default.prototype.api=a.default,e.default.prototype.$request=i.default,e.default.prototype.$http=(0,u.default)(),e.default.config.productionTip=!1,e.default.prototype.$store=r.default,Object.keys(o.default).forEach(function(t){e.default.filter(t,o.default[t])}),s.default.mpType="app";var d=new e.default(f({store:r.default},s.default));t(d).$mount()}).call(this,n("6e42")["createApp"])},"50ef":function(t,e,n){"use strict";var s=n("ebd8"),r=n.n(s);r.a},"5bcc":function(t,e,n){"use strict";var s=n("efb6"),r=n.n(s);r.a},"680c":function(t,e,n){},c4dd:function(t,e,n){"use strict";n.r(e);var s=n("17a7");for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);n("313e"),n("50ef"),n("5bcc");var o,a,i=n("2877"),u=Object(i["a"])(s["default"],o,a,!1,null,null,null);e["default"]=u.exports},ce3e:function(t,e,n){"use strict";(function(t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("0be9"),o=n("2f62");function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),s.forEach(function(e){i(t,e,n[e])})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={data:function(){return{connNumber:0,fnsNumber:0,likeNumber:0,systemNumber:0,msgNumber:0}},watch:{"$store.state.pushMsg.pushFansMsg":function(){if(0!=this.$store.state.pushMsg.pushFansMsg.length){var t=this.$store.state.pushMsg.pushFansMsg.filter(function(t){return"1"==t.status});t=t.length,this.fnsNumber=t.toString(),this.setTabBarBadge()}},"$store.state.pushMsg.pushConnMsg":function(){if(0!=this.$store.state.pushMsg.pushConnMsg.length){var t=this.$store.state.pushMsg.pushConnMsg.filter(function(t){return"1"==t.status});t=t.length,this.connNumber=t.toString(),this.setTabBarBadge()}},"$store.state.pushMsg.pushSystemMsg":function(){if(0!=this.$store.state.pushMsg.pushSystemMsg.length){var t=this.$store.state.pushMsg.pushSystemMsg.filter(function(t){return"0"==t.isRed});t=t.length,this.systemNumber=t.toString(),this.setTabBarBadge()}},"$store.state.pushMsg.pushLikeMsg":function(){if(0!=this.$store.state.pushMsg.pushLikeMsg.length){var t=this.$store.state.pushMsg.pushLikeMsg.filter(function(t){return"1"==t.status});t=t.length,this.likeNumber=t.toString(),this.setTabBarBadge()}},"$store.state.sessionlist":function(){var t=0;this.$store.state.sessionlist.filter(function(e){t+=e.unread});this.msgNumber=t,this.setTabBarBadge()}},onLaunch:function(){var e=this;this.checkOpenGPSServiceByAndroid(),this.$store.dispatch("getConnMsg"),this.$store.dispatch("getFansMsg"),this.$store.dispatch("getLikeMsg"),this.$store.dispatch("getSystemMsg"),setInterval(function(){e.$store.dispatch("getConnMsg"),e.$store.dispatch("getFansMsg"),e.$store.dispatch("getLikeMsg"),e.$store.dispatch("getSystemMsg")},2e3);var n=t.getStorageSync("USERS_KEY").token;n&&(0,r.getWyToken)().then(function(n){var s=n.uid,r=n.wyToken;t.setStorageSync("uid",s),t.setStorageSync("sdktoken",r),e.connect()})},updated:function(){this.$store.dispatch("connect"),this.$store.dispatch("updateRefreshState")},onShow:function(){},onHide:function(){},mounted:function(){this.$request.interceptors.response(function(t){return t&&(t.data.status&&t.data.status.code,t.statusCode,401==t.statusCode&&console.log(s("token失效"," at App.vue:134"))),t})},methods:a({},(0,o.mapActions)(["connect"]),{checkOpenGPSServiceByAndroid:function(){var e=t.getSystemInfoSync();if("android"===e.platform){var n=plus.android.importClass("android.content.Context"),r=plus.android.importClass("android.location.LocationManager"),o=plus.android.runtimeMainActivity(),a=o.getSystemService(n.LOCATION_SERVICE);a.isProviderEnabled(r.GPS_PROVIDER)||t.showModal({title:"提示",content:"请打开定位服务功能",showCancel:!1,success:function(){if(a.isProviderEnabled(r.GPS_PROVIDER))console.log(s("GPS功能已开启"," at App.vue:161"));else{var t=plus.android.importClass("android.content.Intent"),e=plus.android.importClass("android.provider.Settings"),n=new t(e.ACTION_LOCATION_SOURCE_SETTINGS);o.startActivity(n)}}})}},setTabBarBadge:function(){var e=0;if(e=Number(this.fnsNumber)+Number(this.connNumber)+Number(this.likeNumber)+Number(this.systemNumber)+this.msgNumber,e=e.toString(),0!=e&&"NaN"!=e){t.setTabBarBadge({index:1,text:e});var n=t.createInnerAudioContext();n.autoplay=!0,n.src="http://pandla.io/images/static/bell.mp3",n.onPlay(function(){console.log(s("开始播放"," at App.vue:186"))}),n.onError(function(t){console.log(s(t.errMsg," at App.vue:189")),console.log(s(t.errCode," at App.vue:190"))})}}},(0,o.mapActions)(["getConnMsg","getFansMsg","getLikeMsg"]))};e.default=u}).call(this,n("6e42")["default"],n("0de9")["default"])},ebd8:function(t,e,n){},efb6:function(t,e,n){}},[["4be6","common/runtime","common/vendor"]]]);