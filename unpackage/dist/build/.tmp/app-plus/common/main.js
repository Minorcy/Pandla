(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"17a7":function(t,e,s){"use strict";s.r(e);var n=s("ce3e"),r=s.n(n);for(var o in n)"default"!==o&&function(t){s.d(e,t,function(){return n[t]})}(o);e["default"]=r.a},"313e":function(t,e,s){"use strict";var n=s("680c"),r=s.n(n);r.a},"4be6":function(t,e,s){"use strict";(function(t){s("274e"),s("921b");var e=c(s("66fd")),n=c(s("c4dd")),r=c(s("11b2")),o=c(s("98c6")),a=c(s("e3c4"));s("de66");var i=c(s("3850")),u=c(s("6205"));function c(t){return t&&t.__esModule?t:{default:t}}function f(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},n=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),n.forEach(function(e){l(t,e,s[e])})}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}e.default.prototype.api=a.default,e.default.prototype.$request=i.default,e.default.prototype.$http=(0,u.default)(),e.default.config.productionTip=!1,e.default.prototype.$store=r.default,Object.keys(o.default).forEach(function(t){e.default.filter(t,o.default[t])}),n.default.mpType="app";var d=new e.default(f({store:r.default},n.default));t(d).$mount()}).call(this,s("6e42")["createApp"])},"50ef":function(t,e,s){"use strict";var n=s("ebd8"),r=s.n(n);r.a},"5bcc":function(t,e,s){"use strict";var n=s("efb6"),r=s.n(n);r.a},"680c":function(t,e,s){},c4dd:function(t,e,s){"use strict";s.r(e);var n=s("17a7");for(var r in n)"default"!==r&&function(t){s.d(e,t,function(){return n[t]})}(r);s("313e"),s("50ef"),s("5bcc");var o,a,i=s("2877"),u=Object(i["a"])(n["default"],o,a,!1,null,null,null);e["default"]=u.exports},ce3e:function(t,e,s){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;s("0be9");var r=s("2f62");function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},n=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),n.forEach(function(e){a(t,e,s[e])})}return t}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var i={data:function(){return{connNumber:0,fnsNumber:0,likeNumber:0,systemNumber:0,msgNumber:0}},watch:{"$store.state.pushMsg.pushFansMsg":function(){if(this.$store.state.pushMsg&&0!=this.$store.state.pushMsg.pushFansMsg.length){var t=this.$store.state.pushMsg.pushFansMsg.filter(function(t){return"1"==t.status});t=t.length,this.fnsNumber=t.toString(),this.setTabBarBadge()}},"$store.state.pushMsg.pushConnMsg":function(){if(this.$store.state.pushMsg&&0!=this.$store.state.pushMsg.pushConnMsg.length){var t=this.$store.state.pushMsg.pushConnMsg.filter(function(t){return"1"==t.status});t=t.length,this.connNumber=t.toString(),this.setTabBarBadge()}},"$store.state.pushMsg.pushSystemMsg":function(){if(this.$store.state.pushMsg&&0!=this.$store.state.pushMsg.pushSystemMsg.length){var t=this.$store.state.pushMsg.pushSystemMsg.filter(function(t){return"0"==t.isRed});t=t.length,this.systemNumber=t.toString(),this.setTabBarBadge()}},"$store.state.pushMsg.pushLikeMsg":function(){if(this.$store.state.pushMsg&&0!=this.$store.state.pushMsg.pushLikeMsg.length){var t=this.$store.state.pushMsg.pushLikeMsg.filter(function(t){return"1"==t.status});t=t.length,this.likeNumber=t.toString(),this.setTabBarBadge()}},"$store.state.sessionlist":function(){var t=0;this.$store.state.sessionlist.filter(function(e){t+=e.unread});this.msgNumber=t,this.setTabBarBadge()}},onLaunch:function(){var e=this,s=t.getStorageSync("defaultSettings_key");""!=s&&(this.$store.state.defaultSettings=s),this.checkOpenGPSServiceByAndroid(),setInterval(function(){var s=t.getStorageSync("USERS_KEY").token;s&&(e.$store.dispatch("getConnMsg"),e.$store.dispatch("getFansMsg"),e.$store.dispatch("getLikeMsg"),e.$store.dispatch("getSystemMsg"))},2e3);var n=t.getStorageSync("tabDot_KEY");""==n&&t.showTabBarRedDot({index:2})},updated:function(){var e=t.getStorageSync("USERS_KEY").token;if(e){var s=t.getStorageSync("sdktoken");s&&(this.$store.dispatch("connect"),this.$store.dispatch("updateRefreshState"))}},onShow:function(){},onHide:function(){},mounted:function(){this.$request.interceptors.response(function(t){return t&&(t.data.status&&t.data.status.code,t.statusCode,401==t.statusCode&&console.log(n("token失效"," at App.vue:163"))),t})},methods:o({},(0,r.mapActions)(["connect"]),{checkOpenGPSServiceByAndroid:function(){var e=t.getSystemInfoSync();if("android"===e.platform){var s=plus.android.importClass("android.content.Context"),r=plus.android.importClass("android.location.LocationManager"),o=plus.android.runtimeMainActivity(),a=o.getSystemService(s.LOCATION_SERVICE);a.isProviderEnabled(r.GPS_PROVIDER)||t.showModal({title:"提示",content:"请打开定位服务功能",showCancel:!1,success:function(){if(a.isProviderEnabled(r.GPS_PROVIDER))console.log(n("GPS功能已开启"," at App.vue:190"));else{var t=plus.android.importClass("android.content.Intent"),e=plus.android.importClass("android.provider.Settings"),s=new t(e.ACTION_LOCATION_SOURCE_SETTINGS);o.startActivity(s)}}})}},setTabBarBadge:function(){var e=t.getStorageSync("USERS_KEY").token;if(e){var s=0;if(s=Number(this.fnsNumber)+Number(this.connNumber)+Number(this.likeNumber)+Number(this.systemNumber)+this.msgNumber,s=s.toString(),0!=s&&"NaN"!=s){t.setTabBarBadge({index:1,text:s});var r=this.$store.state.defaultSettings.voice;if(r){var o=t.createInnerAudioContext();o.autoplay=!0,o.src="http://pandla.io/images/static/bell.mp3",o.onPlay(function(){console.log(n("开始播放"," at App.vue:225"))}),o.onError(function(t){console.log(n(t.errMsg," at App.vue:228")),console.log(n(t.errCode," at App.vue:229"))})}}}}},(0,r.mapActions)(["getConnMsg","getFansMsg","getLikeMsg"]))};e.default=i}).call(this,s("6e42")["default"],s("0de9")["default"])},ebd8:function(t,e,s){},efb6:function(t,e,s){}},[["4be6","common/runtime","common/vendor"]]]);